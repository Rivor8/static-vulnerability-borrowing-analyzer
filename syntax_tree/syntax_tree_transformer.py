from pycparser.c_ast import FileAST, Node

from .syntax_tree_node_object import SyntaxTreeNode


class SyntaxTreeTransformer:

    @classmethod
    def transform(cls, file_ast: FileAST) -> SyntaxTreeNode:
        tree_file_ast = cls._transform_internal(file_ast)
        return tree_file_ast

    @classmethod
    def _transform_internal(cls, ast_node: Node) -> SyntaxTreeNode:
        tree_node = SyntaxTreeNode(ast_node.__class__.__name__)

        for ast_child in ast_node:
            tree_node_child = cls._transform_internal(ast_child)
            tree_node.add_child(tree_node_child)

        return tree_node
