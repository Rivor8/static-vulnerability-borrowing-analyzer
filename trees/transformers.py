from pycparser.c_ast import FileAST, Node

from trees.objects import TreeNode


class TreeTransformer:

    def transform(self, file_ast: FileAST) -> TreeNode:
        tree_file_ast = self.__transform_internal(file_ast)
        return tree_file_ast

    def __transform_internal(self, ast_node: Node, level=0) -> TreeNode:
        tree_node = TreeNode(ast_node.__class__.__name__)

        for ast_child in ast_node:
            tree_node_child = self.__transform_internal(ast_child, level + 1)
            tree_node.add_child(tree_node_child)

        return tree_node
